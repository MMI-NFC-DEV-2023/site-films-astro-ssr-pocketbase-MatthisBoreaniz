---
import { pb } from "../backend";
import Layout from "../layouts/Layout.astro";

---

<Layout pageTitle="Se connecter avec Github">
  <button id="githubConnect">Se connecter via Github</button>
</Layout>

<script>
import { pb } from "../backend";
    document.getElementById("githubConnect")?.addEventListener("click", async () => {
      const authData = await pb
        .collection("users")
        .authWithOAuth2({ provider: "github" });
        document.cookie = pb.authStore.exportToCookie({httpOnly: false});
        document.location.href = "/authPassword";
    });

</script>